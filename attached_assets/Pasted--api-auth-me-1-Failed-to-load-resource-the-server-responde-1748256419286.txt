/api/auth/me:1 
            
            
           Failed to load resource: the server responded with a status of 401 (Unauthorized)
/api/auth/me:1 
            
            
           Failed to load resource: the server responded with a status of 401 (Unauthorized)
/api/auth/me:1 
            
            
           Failed to load resource: the server responded with a status of 401 (Unauthorized)
/api/auth/me:1 
            
            
           Failed to load resource: the server responded with a status of 401 (Unauthorized)
/api/auth/me:1 
            
            
           Failed to load resource: the server responded with a status of 401 (Unauthorized)
/api/auth/me:1 
            
            
           Failed to load resource: the server responded with a status of 401 (Unauthorized)
/api/auth/me:1 
            
            
           Failed to load resource: the server responded with a status of 401 (Unauthorized)
/api/auth/me:1 
            
            
           Failed to load resource: the server responded with a status of 401 (Unauthorized)
via.placeholder.com/150:1 
            
            
           Failed to load resource: net::ERR_NAME_NOT_RESOLVED
/api/auth/me:1 
            
            
           Failed to load resource: the server responded with a status of 401 (Unauthorized)
 INIT ITEM 0: Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 REBUILD - Quantity confirmation complete
 üîí TOGGLE: Switching from true to false for bill 22
 üîÑ UPDATE FREEZE STATUS: Setting bill 22 freeze to false
 üîÑ UPDATE FREEZE STATUS: Current metadata: Object
 üîÑ UPDATE FREEZE STATUS: Sending metadata: Object
 ‚úÖ FREEZE STATUS UPDATE: Bill 22 freeze status successfully set to true
 üîí TOGGLE: Successfully updated freeze state to true
 ‚úÖ FREEZE STATUS UPDATE: Bill 22 freeze status successfully set to false
 üîí TOGGLE: Successfully updated freeze state to false
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 üîí FREEZE SYSTEM: Initializing freeze state detection...
 üîí FREEZE SYSTEM: Checking bill metadata for freeze status Object
 üîí FREEZE SYSTEM: Successfully extracted freeze status Object
 üîí FREEZE SYSTEM: Setting freeze state to false for bill 22
 üîí FREEZE SYSTEM: Bill is unfrozen - form is editable
 üîí FREEZE STATE CHANGED: isFrozen is now false for bill 22
 BILL EDIT DEBUG - Full bill being edited: {
  "id": 22,
  "businessId": 1,
  "accountId": 1,
  "documentNumber": "BILL-20250526-8376",
  "date": "2025-05-26T00:10:20.533Z",
  "notes": "",
  "description": "Bill #BILL-20250526-8376",
  "status": "partial_received",
  "contactName": "Shayaduzzaman Khan",
  "vendorId": null,
  "billNumber": "BILL-20250526-8376",
  "billDate": "2025-05-26T00:10:20.533Z",
  "dueDate": "2025-05-26T00:10:20.533Z",
  "amount": 24000,
  "paymentReceived": 0,
  "items": [
    {
      "amount": 24000,
      "taxRate": 0,
      "taxType": "percentage",
      "discount": 0,
      "quantity": 3,
      "productId": 5,
      "unitPrice": 8000,
      "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
      "discountType": "percentage",
      "quantityReceived": 2
    }
  ],
  "totalDiscount": 0,
  "totalDiscountType": "flat",
  "createdAt": "2025-05-26T00:10:47.189Z",
  "type": "expense",
  "category": "Purchases",
  "metadata": {
    "totalDiscount": 0,
    "totalDiscountType": "flat",
    "dueDate": "2025-05-26T00:10:20.533Z",
    "itemQuantitiesReceived": [],
    "receivedQuantityMap": {},
    "isFrozen": false,
    "lastFreezeUpdate": "2025-05-26T10:28:20.839Z"
  }
}
 DEBUG: Metadata was already an object
 DEBUG: Raw metadata content: Object
 DEBUG: Properly validated quantities from metadata: []
 DEBUG: Found direct quantities in items: Array(1)
 DEBUG: Added direct quantity for product 5: 2
 DEEP DEBUG - Raw transaction items before processing: [{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}]
 DEEP DEBUG - Full transaction object: {"id":22,"businessId":1,"accountId":1,"documentNumber":"BILL-20250526-8376","date":"2025-05-26T00:10:20.533Z","notes":"","description":"Bill #BILL-20250526-8376","status":"partial_received","contactName":"Shayaduzzaman Khan","vendorId":null,"billNumber":"BILL-20250526-8376","billDate":"2025-05-26T00:10:20.533Z","dueDate":"2025-05-26T00:10:20.533Z","amount":24000,"paymentReceived":0,"items":[{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}],"totalDiscount":0,"totalDiscountType":"flat","createdAt":"2025-05-26T00:10:47.189Z","type":"expense","category":"Purchases","metadata":{"totalDiscount":0,"totalDiscountType":"flat","dueDate":"2025-05-26T00:10:20.533Z","itemQuantitiesReceived":[],"receivedQuantityMap":{},"isFrozen":false,"lastFreezeUpdate":"2025-05-26T10:28:20.839Z"}}
 DEEP DEBUG - Raw item data for product 5: {"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}
 DEEP DEBUG - Found direct quantityReceived=2 on item for product 5
 DEEP DEBUG - Item property [amount] = 24000
 DEEP DEBUG - Item property [taxRate] = 0
 DEEP DEBUG - Item property [taxType] = percentage
 DEEP DEBUG - Item property [discount] = 0
 DEEP DEBUG - Item property [quantity] = 3
 DEEP DEBUG - Item property [productId] = 5
 DEEP DEBUG - Item property [unitPrice] = 8000
 DEEP DEBUG - Item property [description] = Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.
 DEEP DEBUG - Item property [discountType] = percentage
 DEEP DEBUG - Item property [quantityReceived] = 2
 DEEP DEBUG - Final processing decision for Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 Found totalDiscount in metadata: 0
 Setting totalDiscount: 0 type: flat
 Checking for metadata in editingBill: Object
 Using totalDiscount from metadata: 0
 ‚ö†Ô∏è FIXED: Quantity for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.): Object
 üîç FINAL ITEMS FOR FORM: [
  {
    "productId": 5,
    "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
    "quantityReceived": 2
  }
]
 üîß EXPLICITLY set form item 0 (5) quantityReceived to: 2
 Final form reset - Product 5: Quantity 2
 REBUILD - Initializing form with complete bill data and quantities
 INIT ITEM 0: Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 REBUILD - Quantity confirmation complete
 üîí TOGGLE: Switching from false to true for bill 22
 üîÑ UPDATE FREEZE STATUS: Setting bill 22 freeze to true
 üîÑ UPDATE FREEZE STATUS: Current metadata: Object
 üîÑ UPDATE FREEZE STATUS: Sending metadata: Object
 ‚úÖ FREEZE STATUS UPDATE: Bill 22 freeze status successfully set to true
 üîí TOGGLE: Successfully updated freeze state to true
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 üîí FREEZE SYSTEM: Initializing freeze state detection...
 üîí FREEZE SYSTEM: Checking bill metadata for freeze status Object
 üîí FREEZE SYSTEM: Successfully extracted freeze status Object
 üîí FREEZE SYSTEM: Setting freeze state to true for bill 22
 üîí FREEZE SYSTEM: Bill is frozen - applying form restrictions
 üîí FREEZE STATE CHANGED: isFrozen is now true for bill 22
 BILL EDIT DEBUG - Full bill being edited: {
  "id": 22,
  "businessId": 1,
  "accountId": 1,
  "documentNumber": "BILL-20250526-8376",
  "date": "2025-05-26T00:10:20.533Z",
  "notes": "",
  "description": "Bill #BILL-20250526-8376",
  "status": "partial_received",
  "contactName": "Shayaduzzaman Khan",
  "vendorId": null,
  "billNumber": "BILL-20250526-8376",
  "billDate": "2025-05-26T00:10:20.533Z",
  "dueDate": "2025-05-26T00:10:20.533Z",
  "amount": 24000,
  "paymentReceived": 0,
  "items": [
    {
      "amount": 24000,
      "taxRate": 0,
      "taxType": "percentage",
      "discount": 0,
      "quantity": 3,
      "productId": 5,
      "unitPrice": 8000,
      "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
      "discountType": "percentage",
      "quantityReceived": 2
    }
  ],
  "totalDiscount": 0,
  "totalDiscountType": "flat",
  "createdAt": "2025-05-26T00:10:47.189Z",
  "type": "expense",
  "category": "Purchases",
  "metadata": {
    "totalDiscount": 0,
    "totalDiscountType": "flat",
    "dueDate": "2025-05-26T00:10:20.533Z",
    "itemQuantitiesReceived": [],
    "receivedQuantityMap": {},
    "isFrozen": true,
    "lastFreezeUpdate": "2025-05-26T10:28:25.126Z"
  }
}
 DEBUG: Metadata was already an object
 DEBUG: Raw metadata content: Object
 DEBUG: Properly validated quantities from metadata: []
 DEBUG: Found direct quantities in items: Array(1)
 DEBUG: Added direct quantity for product 5: 2
 DEEP DEBUG - Raw transaction items before processing: [{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}]
 DEEP DEBUG - Full transaction object: {"id":22,"businessId":1,"accountId":1,"documentNumber":"BILL-20250526-8376","date":"2025-05-26T00:10:20.533Z","notes":"","description":"Bill #BILL-20250526-8376","status":"partial_received","contactName":"Shayaduzzaman Khan","vendorId":null,"billNumber":"BILL-20250526-8376","billDate":"2025-05-26T00:10:20.533Z","dueDate":"2025-05-26T00:10:20.533Z","amount":24000,"paymentReceived":0,"items":[{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}],"totalDiscount":0,"totalDiscountType":"flat","createdAt":"2025-05-26T00:10:47.189Z","type":"expense","category":"Purchases","metadata":{"totalDiscount":0,"totalDiscountType":"flat","dueDate":"2025-05-26T00:10:20.533Z","itemQuantitiesReceived":[],"receivedQuantityMap":{},"isFrozen":true,"lastFreezeUpdate":"2025-05-26T10:28:25.126Z"}}
 DEEP DEBUG - Raw item data for product 5: {"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}
 DEEP DEBUG - Found direct quantityReceived=2 on item for product 5
 DEEP DEBUG - Item property [amount] = 24000
 DEEP DEBUG - Item property [taxRate] = 0
 DEEP DEBUG - Item property [taxType] = percentage
 DEEP DEBUG - Item property [discount] = 0
 DEEP DEBUG - Item property [quantity] = 3
 DEEP DEBUG - Item property [productId] = 5
 DEEP DEBUG - Item property [unitPrice] = 8000
 DEEP DEBUG - Item property [description] = Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.
 DEEP DEBUG - Item property [discountType] = percentage
 DEEP DEBUG - Item property [quantityReceived] = 2
 DEEP DEBUG - Final processing decision for Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 Found totalDiscount in metadata: 0
 Setting totalDiscount: 0 type: flat
 Checking for metadata in editingBill: Object
 Using totalDiscount from metadata: 0
 ‚ö†Ô∏è FIXED: Quantity for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.): Object
 üîç FINAL ITEMS FOR FORM: [
  {
    "productId": 5,
    "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
    "quantityReceived": 2
  }
]
 üîß EXPLICITLY set form item 0 (5) quantityReceived to: 2
 Final form reset - Product 5: Quantity 2
 REBUILD - Initializing form with complete bill data and quantities
 INIT ITEM 0: Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 REBUILD - Quantity confirmation complete
 üîí TOGGLE: Switching from true to false for bill 22
 üîÑ UPDATE FREEZE STATUS: Setting bill 22 freeze to false
 üîÑ UPDATE FREEZE STATUS: Current metadata: Object
 üîÑ UPDATE FREEZE STATUS: Sending metadata: Object
 ‚úÖ FREEZE STATUS UPDATE: Bill 22 freeze status successfully set to false
 üîí TOGGLE: Successfully updated freeze state to false
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 üîí FREEZE SYSTEM: Initializing freeze state detection...
 üîí FREEZE SYSTEM: Checking bill metadata for freeze status Object
 üîí FREEZE SYSTEM: Successfully extracted freeze status Object
 üîí FREEZE SYSTEM: Setting freeze state to false for bill 22
 üîí FREEZE SYSTEM: Bill is unfrozen - form is editable
 üîí FREEZE STATE CHANGED: isFrozen is now false for bill 22
 BILL EDIT DEBUG - Full bill being edited: {
  "id": 22,
  "businessId": 1,
  "accountId": 1,
  "documentNumber": "BILL-20250526-8376",
  "date": "2025-05-26T00:10:20.533Z",
  "notes": "",
  "description": "Bill #BILL-20250526-8376",
  "status": "partial_received",
  "contactName": "Shayaduzzaman Khan",
  "vendorId": null,
  "billNumber": "BILL-20250526-8376",
  "billDate": "2025-05-26T00:10:20.533Z",
  "dueDate": "2025-05-26T00:10:20.533Z",
  "amount": 24000,
  "paymentReceived": 0,
  "items": [
    {
      "amount": 24000,
      "taxRate": 0,
      "taxType": "percentage",
      "discount": 0,
      "quantity": 3,
      "productId": 5,
      "unitPrice": 8000,
      "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
      "discountType": "percentage",
      "quantityReceived": 2
    }
  ],
  "totalDiscount": 0,
  "totalDiscountType": "flat",
  "createdAt": "2025-05-26T00:10:47.189Z",
  "type": "expense",
  "category": "Purchases",
  "metadata": {
    "totalDiscount": 0,
    "totalDiscountType": "flat",
    "dueDate": "2025-05-26T00:10:20.533Z",
    "itemQuantitiesReceived": [],
    "receivedQuantityMap": {},
    "isFrozen": false,
    "lastFreezeUpdate": "2025-05-26T10:28:27.821Z"
  }
}
 DEBUG: Metadata was already an object
 DEBUG: Raw metadata content: Object
 DEBUG: Properly validated quantities from metadata: []
 DEBUG: Found direct quantities in items: Array(1)
 DEBUG: Added direct quantity for product 5: 2
 DEEP DEBUG - Raw transaction items before processing: [{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}]
 DEEP DEBUG - Full transaction object: {"id":22,"businessId":1,"accountId":1,"documentNumber":"BILL-20250526-8376","date":"2025-05-26T00:10:20.533Z","notes":"","description":"Bill #BILL-20250526-8376","status":"partial_received","contactName":"Shayaduzzaman Khan","vendorId":null,"billNumber":"BILL-20250526-8376","billDate":"2025-05-26T00:10:20.533Z","dueDate":"2025-05-26T00:10:20.533Z","amount":24000,"paymentReceived":0,"items":[{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}],"totalDiscount":0,"totalDiscountType":"flat","createdAt":"2025-05-26T00:10:47.189Z","type":"expense","category":"Purchases","metadata":{"totalDiscount":0,"totalDiscountType":"flat","dueDate":"2025-05-26T00:10:20.533Z","itemQuantitiesReceived":[],"receivedQuantityMap":{},"isFrozen":false,"lastFreezeUpdate":"2025-05-26T10:28:27.821Z"}}
 DEEP DEBUG - Raw item data for product 5: {"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}
 DEEP DEBUG - Found direct quantityReceived=2 on item for product 5
 DEEP DEBUG - Item property [amount] = 24000
 DEEP DEBUG - Item property [taxRate] = 0
 DEEP DEBUG - Item property [taxType] = percentage
 DEEP DEBUG - Item property [discount] = 0
 DEEP DEBUG - Item property [quantity] = 3
 DEEP DEBUG - Item property [productId] = 5
 DEEP DEBUG - Item property [unitPrice] = 8000
 DEEP DEBUG - Item property [description] = Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.
 DEEP DEBUG - Item property [discountType] = percentage
 DEEP DEBUG - Item property [quantityReceived] = 2
 DEEP DEBUG - Final processing decision for Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 Found totalDiscount in metadata: 0
 Setting totalDiscount: 0 type: flat
 Checking for metadata in editingBill: Object
 Using totalDiscount from metadata: 0
 ‚ö†Ô∏è FIXED: Quantity for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.): Object
 üîç FINAL ITEMS FOR FORM: [
  {
    "productId": 5,
    "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
    "quantityReceived": 2
  }
]
 üîß EXPLICITLY set form item 0 (5) quantityReceived to: 2
 Final form reset - Product 5: Quantity 2
 REBUILD - Initializing form with complete bill data and quantities
 INIT ITEM 0: Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 REBUILD - Quantity confirmation complete
 üîí TOGGLE: Switching from false to true for bill 22
 üîÑ UPDATE FREEZE STATUS: Setting bill 22 freeze to true
 üîÑ UPDATE FREEZE STATUS: Current metadata: Object
 üîÑ UPDATE FREEZE STATUS: Sending metadata: Object
 ‚úÖ FREEZE STATUS UPDATE: Bill 22 freeze status successfully set to true
 üîí TOGGLE: Successfully updated freeze state to true
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 üîí FREEZE SYSTEM: Initializing freeze state detection...
 üîí FREEZE SYSTEM: Checking bill metadata for freeze status Object
 üîí FREEZE SYSTEM: Successfully extracted freeze status Object
 üîí FREEZE SYSTEM: Setting freeze state to true for bill 22
 üîí FREEZE SYSTEM: Bill is frozen - applying form restrictions
 üîí FREEZE STATE CHANGED: isFrozen is now true for bill 22
 BILL EDIT DEBUG - Full bill being edited: {
  "id": 22,
  "businessId": 1,
  "accountId": 1,
  "documentNumber": "BILL-20250526-8376",
  "date": "2025-05-26T00:10:20.533Z",
  "notes": "",
  "description": "Bill #BILL-20250526-8376",
  "status": "partial_received",
  "contactName": "Shayaduzzaman Khan",
  "vendorId": null,
  "billNumber": "BILL-20250526-8376",
  "billDate": "2025-05-26T00:10:20.533Z",
  "dueDate": "2025-05-26T00:10:20.533Z",
  "amount": 24000,
  "paymentReceived": 0,
  "items": [
    {
      "amount": 24000,
      "taxRate": 0,
      "taxType": "percentage",
      "discount": 0,
      "quantity": 3,
      "productId": 5,
      "unitPrice": 8000,
      "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
      "discountType": "percentage",
      "quantityReceived": 2
    }
  ],
  "totalDiscount": 0,
  "totalDiscountType": "flat",
  "createdAt": "2025-05-26T00:10:47.189Z",
  "type": "expense",
  "category": "Purchases",
  "metadata": {
    "totalDiscount": 0,
    "totalDiscountType": "flat",
    "dueDate": "2025-05-26T00:10:20.533Z",
    "itemQuantitiesReceived": [],
    "receivedQuantityMap": {},
    "isFrozen": true,
    "lastFreezeUpdate": "2025-05-26T10:28:32.620Z"
  }
}
 DEBUG: Metadata was already an object
 DEBUG: Raw metadata content: Object
 DEBUG: Properly validated quantities from metadata: []
 DEBUG: Found direct quantities in items: Array(1)
 DEBUG: Added direct quantity for product 5: 2
 DEEP DEBUG - Raw transaction items before processing: [{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}]
 DEEP DEBUG - Full transaction object: {"id":22,"businessId":1,"accountId":1,"documentNumber":"BILL-20250526-8376","date":"2025-05-26T00:10:20.533Z","notes":"","description":"Bill #BILL-20250526-8376","status":"partial_received","contactName":"Shayaduzzaman Khan","vendorId":null,"billNumber":"BILL-20250526-8376","billDate":"2025-05-26T00:10:20.533Z","dueDate":"2025-05-26T00:10:20.533Z","amount":24000,"paymentReceived":0,"items":[{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}],"totalDiscount":0,"totalDiscountType":"flat","createdAt":"2025-05-26T00:10:47.189Z","type":"expense","category":"Purchases","metadata":{"totalDiscount":0,"totalDiscountType":"flat","dueDate":"2025-05-26T00:10:20.533Z","itemQuantitiesReceived":[],"receivedQuantityMap":{},"isFrozen":true,"lastFreezeUpdate":"2025-05-26T10:28:32.620Z"}}
 DEEP DEBUG - Raw item data for product 5: {"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}
 DEEP DEBUG - Found direct quantityReceived=2 on item for product 5
 DEEP DEBUG - Item property [amount] = 24000
 DEEP DEBUG - Item property [taxRate] = 0
 DEEP DEBUG - Item property [taxType] = percentage
 DEEP DEBUG - Item property [discount] = 0
 DEEP DEBUG - Item property [quantity] = 3
 DEEP DEBUG - Item property [productId] = 5
 DEEP DEBUG - Item property [unitPrice] = 8000
 DEEP DEBUG - Item property [description] = Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.
 DEEP DEBUG - Item property [discountType] = percentage
 DEEP DEBUG - Item property [quantityReceived] = 2
 DEEP DEBUG - Final processing decision for Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 Found totalDiscount in metadata: 0
 Setting totalDiscount: 0 type: flat
 Checking for metadata in editingBill: Object
 Using totalDiscount from metadata: 0
 ‚ö†Ô∏è FIXED: Quantity for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.): Object
 üîç FINAL ITEMS FOR FORM: [
  {
    "productId": 5,
    "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
    "quantityReceived": 2
  }
]
 üîß EXPLICITLY set form item 0 (5) quantityReceived to: 2
 Final form reset - Product 5: Quantity 2
 REBUILD - Initializing form with complete bill data and quantities
 INIT ITEM 0: Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 REBUILD - Quantity confirmation complete
PurchaseBillSplitView.tsx:685 Checking for discount in bill view: Object
PurchaseBillSplitView.tsx:693 Bill metadata when checking discount: Object
PurchaseBillSplitView.tsx:730 Discount calculation with improved handling: Object
PurchaseBillSplitView.tsx:685 Checking for discount in bill view: Object
PurchaseBillSplitView.tsx:693 Bill metadata when checking discount: Object
PurchaseBillSplitView.tsx:730 Discount calculation with improved handling: Object
PurchaseBillSplitView.tsx:685 Checking for discount in bill view: Object
PurchaseBillSplitView.tsx:693 Bill metadata when checking discount: Object
PurchaseBillSplitView.tsx:730 Discount calculation with improved handling: Object
PurchaseBillSplitView.tsx:685 Checking for discount in bill view: Object
PurchaseBillSplitView.tsx:693 Bill metadata when checking discount: Object
PurchaseBillSplitView.tsx:730 Discount calculation with improved handling: Object
PurchaseBillSplitView.tsx:186 Original bill for editing: Object
PurchaseBillSplitView.tsx:220 Prepared metadata for edit: Object
PurchaseBillSplitView.tsx:246 üü¢ EDIT PREP: Found direct property value 2 for product 5
PurchaseBillSplitView.tsx:304 üìä EDIT PREP SUMMARY for product 5: Object
PurchaseBillSplitView.tsx:312 VIEW FINAL: Product 5 received qty = 2 (direct-property)
PurchaseBillSplitView.tsx:339 Determined contact ID: null
PurchaseBillSplitView.tsx:342 Processed items: Array(1)
PurchaseBillSplitView.tsx:384 Bill object prepared for editing: Object
 INIT - Initializing bill items from editing bill: Object
 INIT - Items data to initialize from: [
  {
    "amount": 24000,
    "taxRate": 0,
    "taxType": "percentage",
    "discount": 0,
    "quantity": 3,
    "productId": 5,
    "unitPrice": 8000,
    "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
    "discountType": "percentage",
    "quantityReceived": 2
  }
]
 ‚úÖ INIT - Bill has metadata property
 ‚úÖ INIT - Successfully parsed metadata string: {
  "totalDiscount": 0,
  "totalDiscountType": "flat",
  "dueDate": "2025-05-26T00:10:20.533Z",
  "itemQuantitiesReceived": [],
  "receivedQuantityMap": {}
}
 ‚úÖ INIT - Found receivedQuantityMap in metadata: Object
 ‚úÖ INIT - Found itemQuantitiesReceived array in metadata: []
 ‚ö†Ô∏è INIT - No received quantities found in metadata
 INIT - Found direct quantities in items: Array(1)
 INIT - Adding direct quantity for product 5: 2
 INIT - Final quantityReceivedMap: Object
 INIT - FINAL quantityReceived for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.): 2
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 Parsed metadata: Object
 üîí FREEZE SYSTEM: Initializing freeze state detection...
 üîí FREEZE SYSTEM: Checking bill metadata for freeze status Object
 üîí FREEZE SYSTEM: Successfully extracted freeze status Object
 üîí FREEZE SYSTEM: Setting freeze state to false for bill 22
 üîí FREEZE SYSTEM: Bill is unfrozen - form is editable
 üîí FREEZE STATE CHANGED: isFrozen is now false for bill 22
 BILL EDIT DEBUG - Full bill being edited: {
  "id": 22,
  "businessId": 1,
  "accountId": 1,
  "documentNumber": "BILL-20250526-8376",
  "date": "2025-05-26T00:10:20.533Z",
  "notes": "",
  "description": "Bill #BILL-20250526-8376",
  "status": "partial_received",
  "contactName": "Shayaduzzaman Khan",
  "vendorId": null,
  "billNumber": "BILL-20250526-8376",
  "billDate": "2025-05-26T00:10:20.533Z",
  "dueDate": "2025-05-26T00:10:20.533Z",
  "amount": 24000,
  "paymentReceived": 0,
  "items": [
    {
      "amount": 24000,
      "taxRate": 0,
      "taxType": "percentage",
      "discount": 0,
      "quantity": 3,
      "productId": 5,
      "unitPrice": 8000,
      "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
      "discountType": "percentage",
      "quantityReceived": 2
    }
  ],
  "totalDiscount": 0,
  "totalDiscountType": "flat",
  "createdAt": "2025-05-26T00:10:47.189Z",
  "type": "expense",
  "category": "Purchases",
  "metadata": "{\"totalDiscount\":0,\"totalDiscountType\":\"flat\",\"dueDate\":\"2025-05-26T00:10:20.533Z\",\"itemQuantitiesReceived\":[],\"receivedQuantityMap\":{}}"
}
 DEBUG: Successfully parsed metadata from string
 DEBUG: Raw metadata content: Object
 DEBUG: Properly validated quantities from metadata: []
 DEBUG: Found direct quantities in items: Array(1)
 DEBUG: Added direct quantity for product 5: 2
 DEEP DEBUG - Raw transaction items before processing: [{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}]
 DEEP DEBUG - Full transaction object: {"id":22,"businessId":1,"accountId":1,"documentNumber":"BILL-20250526-8376","date":"2025-05-26T00:10:20.533Z","notes":"","description":"Bill #BILL-20250526-8376","status":"partial_received","contactName":"Shayaduzzaman Khan","vendorId":null,"billNumber":"BILL-20250526-8376","billDate":"2025-05-26T00:10:20.533Z","dueDate":"2025-05-26T00:10:20.533Z","amount":24000,"paymentReceived":0,"items":[{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}],"totalDiscount":0,"totalDiscountType":"flat","createdAt":"2025-05-26T00:10:47.189Z","type":"expense","category":"Purchases","metadata":"{\"totalDiscount\":0,\"totalDiscountType\":\"flat\",\"dueDate\":\"2025-05-26T00:10:20.533Z\",\"itemQuantitiesReceived\":[],\"receivedQuantityMap\":{}}"}
 DEEP DEBUG - Raw item data for product 5: {"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}
 DEEP DEBUG - Found direct quantityReceived=2 on item for product 5
 DEEP DEBUG - Item property [amount] = 24000
 DEEP DEBUG - Item property [taxRate] = 0
 DEEP DEBUG - Item property [taxType] = percentage
 DEEP DEBUG - Item property [discount] = 0
 DEEP DEBUG - Item property [quantity] = 3
 DEEP DEBUG - Item property [productId] = 5
 DEEP DEBUG - Item property [unitPrice] = 8000
 DEEP DEBUG - Item property [description] = Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.
 DEEP DEBUG - Item property [discountType] = percentage
 DEEP DEBUG - Item property [quantityReceived] = 2
 DEEP DEBUG - Final processing decision for Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 Found totalDiscount in direct property: 0
 Setting totalDiscount: 0 type: flat
 Checking for metadata in editingBill: Object
 Using totalDiscount from direct property: 0
 ‚ö†Ô∏è FIXED: Quantity for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.): Object
 üîç FINAL ITEMS FOR FORM: [
  {
    "productId": 5,
    "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
    "quantityReceived": 2
  }
]
 üîß EXPLICITLY set form item 0 (5) quantityReceived to: 2
 Final form reset - Product 5: Quantity 2
 REBUILD - Initializing form with complete bill data and quantities
 INIT ITEM 0: Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 Parsed metadata: Object
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 Parsed metadata: Object
 REBUILD - Quantity confirmation complete
PurchaseBillSplitView.tsx:685 Checking for discount in bill view: Object
PurchaseBillSplitView.tsx:693 Bill metadata when checking discount: Object
PurchaseBillSplitView.tsx:730 Discount calculation with improved handling: Object
PurchaseBillSplitView.tsx:186 Original bill for editing: Object
PurchaseBillSplitView.tsx:220 Prepared metadata for edit: Object
PurchaseBillSplitView.tsx:246 üü¢ EDIT PREP: Found direct property value 2 for product 5
PurchaseBillSplitView.tsx:304 üìä EDIT PREP SUMMARY for product 5: Object
PurchaseBillSplitView.tsx:312 VIEW FINAL: Product 5 received qty = 2 (direct-property)
PurchaseBillSplitView.tsx:339 Determined contact ID: null
PurchaseBillSplitView.tsx:342 Processed items: Array(1)
PurchaseBillSplitView.tsx:384 Bill object prepared for editing: Object
 INIT - Initializing bill items from editing bill: Object
 INIT - Items data to initialize from: [
  {
    "amount": 24000,
    "taxRate": 0,
    "taxType": "percentage",
    "discount": 0,
    "quantity": 3,
    "productId": 5,
    "unitPrice": 8000,
    "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
    "discountType": "percentage",
    "quantityReceived": 2
  }
]
 ‚úÖ INIT - Bill has metadata property
 ‚úÖ INIT - Successfully parsed metadata string: {
  "totalDiscount": 0,
  "totalDiscountType": "flat",
  "dueDate": "2025-05-26T00:10:20.533Z",
  "itemQuantitiesReceived": [],
  "receivedQuantityMap": {}
}
 ‚úÖ INIT - Found receivedQuantityMap in metadata: Object
 ‚úÖ INIT - Found itemQuantitiesReceived array in metadata: []
 ‚ö†Ô∏è INIT - No received quantities found in metadata
 INIT - Found direct quantities in items: Array(1)
 INIT - Adding direct quantity for product 5: 2
 INIT - Final quantityReceivedMap: Object
 INIT - FINAL quantityReceived for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.): 2
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 Parsed metadata: Object
 üîí FREEZE SYSTEM: Initializing freeze state detection...
 üîí FREEZE SYSTEM: Checking bill metadata for freeze status Object
 üîí FREEZE SYSTEM: Successfully extracted freeze status Object
 üîí FREEZE SYSTEM: Setting freeze state to false for bill 22
 üîí FREEZE SYSTEM: Bill is unfrozen - form is editable
 üîí FREEZE STATE CHANGED: isFrozen is now false for bill 22
 BILL EDIT DEBUG - Full bill being edited: {
  "id": 22,
  "businessId": 1,
  "accountId": 1,
  "documentNumber": "BILL-20250526-8376",
  "date": "2025-05-26T00:10:20.533Z",
  "notes": "",
  "description": "Bill #BILL-20250526-8376",
  "status": "partial_received",
  "contactName": "Shayaduzzaman Khan",
  "vendorId": null,
  "billNumber": "BILL-20250526-8376",
  "billDate": "2025-05-26T00:10:20.533Z",
  "dueDate": "2025-05-26T00:10:20.533Z",
  "amount": 24000,
  "paymentReceived": 0,
  "items": [
    {
      "amount": 24000,
      "taxRate": 0,
      "taxType": "percentage",
      "discount": 0,
      "quantity": 3,
      "productId": 5,
      "unitPrice": 8000,
      "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
      "discountType": "percentage",
      "quantityReceived": 2
    }
  ],
  "totalDiscount": 0,
  "totalDiscountType": "flat",
  "createdAt": "2025-05-26T00:10:47.189Z",
  "type": "expense",
  "category": "Purchases",
  "metadata": "{\"totalDiscount\":0,\"totalDiscountType\":\"flat\",\"dueDate\":\"2025-05-26T00:10:20.533Z\",\"itemQuantitiesReceived\":[],\"receivedQuantityMap\":{}}"
}
 DEBUG: Successfully parsed metadata from string
 DEBUG: Raw metadata content: Object
 DEBUG: Properly validated quantities from metadata: []
 DEBUG: Found direct quantities in items: Array(1)
 DEBUG: Added direct quantity for product 5: 2
 DEEP DEBUG - Raw transaction items before processing: [{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}]
 DEEP DEBUG - Full transaction object: {"id":22,"businessId":1,"accountId":1,"documentNumber":"BILL-20250526-8376","date":"2025-05-26T00:10:20.533Z","notes":"","description":"Bill #BILL-20250526-8376","status":"partial_received","contactName":"Shayaduzzaman Khan","vendorId":null,"billNumber":"BILL-20250526-8376","billDate":"2025-05-26T00:10:20.533Z","dueDate":"2025-05-26T00:10:20.533Z","amount":24000,"paymentReceived":0,"items":[{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}],"totalDiscount":0,"totalDiscountType":"flat","createdAt":"2025-05-26T00:10:47.189Z","type":"expense","category":"Purchases","metadata":"{\"totalDiscount\":0,\"totalDiscountType\":\"flat\",\"dueDate\":\"2025-05-26T00:10:20.533Z\",\"itemQuantitiesReceived\":[],\"receivedQuantityMap\":{}}"}
 DEEP DEBUG - Raw item data for product 5: {"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}
 DEEP DEBUG - Found direct quantityReceived=2 on item for product 5
 DEEP DEBUG - Item property [amount] = 24000
 DEEP DEBUG - Item property [taxRate] = 0
 DEEP DEBUG - Item property [taxType] = percentage
 DEEP DEBUG - Item property [discount] = 0
 DEEP DEBUG - Item property [quantity] = 3
 DEEP DEBUG - Item property [productId] = 5
 DEEP DEBUG - Item property [unitPrice] = 8000
 DEEP DEBUG - Item property [description] = Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.
 DEEP DEBUG - Item property [discountType] = percentage
 DEEP DEBUG - Item property [quantityReceived] = 2
 DEEP DEBUG - Final processing decision for Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 Found totalDiscount in direct property: 0
 Setting totalDiscount: 0 type: flat
 Checking for metadata in editingBill: Object
 Using totalDiscount from direct property: 0
 ‚ö†Ô∏è FIXED: Quantity for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.): Object
 üîç FINAL ITEMS FOR FORM: [
  {
    "productId": 5,
    "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
    "quantityReceived": 2
  }
]
 üîß EXPLICITLY set form item 0 (5) quantityReceived to: 2
 Final form reset - Product 5: Quantity 2
 REBUILD - Initializing form with complete bill data and quantities
 INIT ITEM 0: Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 Parsed metadata: Object
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 Parsed metadata: Object
 REBUILD - Quantity confirmation complete
PurchaseBillSplitView.tsx:685 Checking for discount in bill view: Object
PurchaseBillSplitView.tsx:693 Bill metadata when checking discount: Object
PurchaseBillSplitView.tsx:730 Discount calculation with improved handling: Object
PurchaseBillSplitView.tsx:685 Checking for discount in bill view: Object
PurchaseBillSplitView.tsx:693 Bill metadata when checking discount: Object
PurchaseBillSplitView.tsx:730 Discount calculation with improved handling: Object
PurchaseBillSplitView.tsx:186 Original bill for editing: Object
PurchaseBillSplitView.tsx:220 Prepared metadata for edit: Object
PurchaseBillSplitView.tsx:246 üü¢ EDIT PREP: Found direct property value 0 for product 10
PurchaseBillSplitView.tsx:304 üìä EDIT PREP SUMMARY for product 10: Object
PurchaseBillSplitView.tsx:312 VIEW FINAL: Product 10 received qty = 0 (direct-property)
PurchaseBillSplitView.tsx:339 Determined contact ID: null
PurchaseBillSplitView.tsx:342 Processed items: Array(1)
PurchaseBillSplitView.tsx:384 Bill object prepared for editing: Object
 INIT - Initializing bill items from editing bill: Object
 INIT - Items data to initialize from: [
  {
    "amount": 4500,
    "taxRate": 1.8,
    "taxType": "percentage",
    "discount": 1.1,
    "quantity": 3,
    "productId": 10,
    "unitPrice": 1500,
    "description": "Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.",
    "discountType": "percentage",
    "quantityReceived": 0
  }
]
 ‚úÖ INIT - Bill has metadata property
 ‚úÖ INIT - Successfully parsed metadata string: {
  "totalDiscount": 0,
  "totalDiscountType": "flat",
  "dueDate": "2025-05-24T15:43:31.253Z",
  "itemQuantitiesReceived": [],
  "receivedQuantityMap": {}
}
 ‚úÖ INIT - Found receivedQuantityMap in metadata: Object
 ‚úÖ INIT - Found itemQuantitiesReceived array in metadata: []
 ‚ö†Ô∏è INIT - No received quantities found in metadata
 INIT - Found direct quantities in items: Array(1)
 INIT - Adding direct quantity for product 10: 0
 INIT - Final quantityReceivedMap: Object
 INIT - FINAL quantityReceived for product 10 (Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.): 0
 INITIALIZATION: Starting extraction for product 10 (Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.)
 EXTRACT: Direct property found with value 0 for product 10
 EXTRACTION COMPLETE for product 10: Object
 Parsed metadata: Object
 üîí FREEZE SYSTEM: Initializing freeze state detection...
 üîí FREEZE SYSTEM: Checking bill metadata for freeze status Object
 üîí FREEZE SYSTEM: Successfully extracted freeze status Object
 üîí FREEZE SYSTEM: Setting freeze state to false for bill 21
 üîí FREEZE SYSTEM: Bill is unfrozen - form is editable
 üîí FREEZE STATE CHANGED: isFrozen is now false for bill 21
 BILL EDIT DEBUG - Full bill being edited: {
  "id": 21,
  "businessId": 1,
  "accountId": 1,
  "documentNumber": "BILL-20250524-7447",
  "date": "2025-05-24T15:43:31.253Z",
  "notes": "",
  "description": "Bill #BILL-20250524-7447",
  "status": "partial_paid",
  "contactName": "alamgir alam",
  "vendorId": null,
  "billNumber": "BILL-20250524-7447",
  "billDate": "2025-05-24T15:43:31.253Z",
  "dueDate": "2025-05-24T15:43:31.253Z",
  "amount": 4531,
  "paymentReceived": 2397,
  "items": [
    {
      "amount": 4500,
      "taxRate": 1.8,
      "taxType": "percentage",
      "discount": 1.1,
      "quantity": 3,
      "productId": 10,
      "unitPrice": 1500,
      "description": "Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.",
      "discountType": "percentage",
      "quantityReceived": 0
    }
  ],
  "totalDiscount": 0,
  "totalDiscountType": "flat",
  "createdAt": "2025-05-24T15:44:15.614Z",
  "type": "expense",
  "category": "Purchases",
  "metadata": "{\"totalDiscount\":0,\"totalDiscountType\":\"flat\",\"dueDate\":\"2025-05-24T15:43:31.253Z\",\"itemQuantitiesReceived\":[],\"receivedQuantityMap\":{}}"
}
 DEBUG: Successfully parsed metadata from string
 DEBUG: Raw metadata content: Object
 DEBUG: Properly validated quantities from metadata: []
 DEEP DEBUG - Raw transaction items before processing: [{"amount":4500,"taxRate":1.8,"taxType":"percentage","discount":1.1,"quantity":3,"productId":10,"unitPrice":1500,"description":"Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.","discountType":"percentage","quantityReceived":0}]
 DEEP DEBUG - Full transaction object: {"id":21,"businessId":1,"accountId":1,"documentNumber":"BILL-20250524-7447","date":"2025-05-24T15:43:31.253Z","notes":"","description":"Bill #BILL-20250524-7447","status":"partial_paid","contactName":"alamgir alam","vendorId":null,"billNumber":"BILL-20250524-7447","billDate":"2025-05-24T15:43:31.253Z","dueDate":"2025-05-24T15:43:31.253Z","amount":4531,"paymentReceived":2397,"items":[{"amount":4500,"taxRate":1.8,"taxType":"percentage","discount":1.1,"quantity":3,"productId":10,"unitPrice":1500,"description":"Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.","discountType":"percentage","quantityReceived":0}],"totalDiscount":0,"totalDiscountType":"flat","createdAt":"2025-05-24T15:44:15.614Z","type":"expense","category":"Purchases","metadata":"{\"totalDiscount\":0,\"totalDiscountType\":\"flat\",\"dueDate\":\"2025-05-24T15:43:31.253Z\",\"itemQuantitiesReceived\":[],\"receivedQuantityMap\":{}}"}
 DEEP DEBUG - Raw item data for product 10: {"amount":4500,"taxRate":1.8,"taxType":"percentage","discount":1.1,"quantity":3,"productId":10,"unitPrice":1500,"description":"Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.","discountType":"percentage","quantityReceived":0}
 DEEP DEBUG - Found direct quantityReceived=0 on item for product 10
 DEEP DEBUG - Item property [amount] = 4500
 DEEP DEBUG - Item property [taxRate] = 1.8
 DEEP DEBUG - Item property [taxType] = percentage
 DEEP DEBUG - Item property [discount] = 1.1
 DEEP DEBUG - Item property [quantity] = 3
 DEEP DEBUG - Item property [productId] = 10
 DEEP DEBUG - Item property [unitPrice] = 1500
 DEEP DEBUG - Item property [description] = Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.
 DEEP DEBUG - Item property [discountType] = percentage
 DEEP DEBUG - Item property [quantityReceived] = 0
 DEEP DEBUG - Final processing decision for Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible. (ID: 10) Object
 Found totalDiscount in direct property: 0
 Setting totalDiscount: 0 type: flat
 Checking for metadata in editingBill: Object
 Using totalDiscount from direct property: 0
 ‚ö†Ô∏è FIXED: Quantity for product 10 (Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.): Object
 üîç FINAL ITEMS FOR FORM: [
  {
    "productId": 10,
    "description": "Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.",
    "quantityReceived": 0
  }
]
 üîß EXPLICITLY set form item 0 (10) quantityReceived to: 0
 Final form reset - Product 10: Quantity 0
 REBUILD - Initializing form with complete bill data and quantities
 INIT ITEM 0: Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible. (ID: 10) Object
 INITIALIZATION: Starting extraction for product 10 (Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.)
 EXTRACT: Direct property found with value 0 for product 10
 EXTRACTION COMPLETE for product 10: Object
 Parsed metadata: Object
 INITIALIZATION: Starting extraction for product 10 (Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.)
 EXTRACT: Direct property found with value 0 for product 10
 EXTRACTION COMPLETE for product 10: Object
 Parsed metadata: Object
 REBUILD - Quantity confirmation complete
 üîí TOGGLE: Switching from false to true for bill 21
 üîÑ UPDATE FREEZE STATUS: Setting bill 21 freeze to true
 üîÑ UPDATE FREEZE STATUS: Current metadata: {"totalDiscount":0,"totalDiscountType":"flat","dueDate":"2025-05-24T15:43:31.253Z","itemQuantitiesReceived":[],"receivedQuantityMap":{}}
 üîÑ UPDATE FREEZE STATUS: Sending metadata: Object
 üîí TOGGLE: Switching from false to true for bill 21
 üîÑ UPDATE FREEZE STATUS: Setting bill 21 freeze to true
 üîÑ UPDATE FREEZE STATUS: Current metadata: {"totalDiscount":0,"totalDiscountType":"flat","dueDate":"2025-05-24T15:43:31.253Z","itemQuantitiesReceived":[],"receivedQuantityMap":{}}
 üîÑ UPDATE FREEZE STATUS: Sending metadata: Object
 ‚úÖ FREEZE STATUS UPDATE: Bill 21 freeze status successfully set to true
 üîí TOGGLE: Successfully updated freeze state to true
 INITIALIZATION: Starting extraction for product 10 (Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.)
 EXTRACT: Direct property found with value 0 for product 10
 EXTRACTION COMPLETE for product 10: Object
 üîí FREEZE SYSTEM: Initializing freeze state detection...
 üîí FREEZE SYSTEM: Checking bill metadata for freeze status Object
 üîí FREEZE SYSTEM: Successfully extracted freeze status Object
 üîí FREEZE SYSTEM: Setting freeze state to true for bill 21
 üîí FREEZE SYSTEM: Bill is frozen - applying form restrictions
 üîí FREEZE STATE CHANGED: isFrozen is now true for bill 21
 BILL EDIT DEBUG - Full bill being edited: {
  "id": 21,
  "businessId": 1,
  "accountId": 1,
  "documentNumber": "BILL-20250524-7447",
  "date": "2025-05-24T15:43:31.253Z",
  "notes": "",
  "description": "Bill #BILL-20250524-7447",
  "status": "partial_paid",
  "contactName": "alamgir alam",
  "vendorId": null,
  "billNumber": "BILL-20250524-7447",
  "billDate": "2025-05-24T15:43:31.253Z",
  "dueDate": "2025-05-24T15:43:31.253Z",
  "amount": 4531,
  "paymentReceived": 2397,
  "items": [
    {
      "amount": 4500,
      "taxRate": 1.8,
      "taxType": "percentage",
      "discount": 1.1,
      "quantity": 3,
      "productId": 10,
      "unitPrice": 1500,
      "description": "Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.",
      "discountType": "percentage",
      "quantityReceived": 0
    }
  ],
  "totalDiscount": 0,
  "totalDiscountType": "flat",
  "createdAt": "2025-05-24T15:44:15.614Z",
  "type": "expense",
  "category": "Purchases",
  "metadata": {
    "totalDiscount": 0,
    "totalDiscountType": "flat",
    "dueDate": "2025-05-24T15:43:31.253Z",
    "itemQuantitiesReceived": [],
    "receivedQuantityMap": {},
    "isFrozen": true,
    "lastFreezeUpdate": "2025-05-26T10:30:04.590Z"
  }
}
 DEBUG: Metadata was already an object
 DEBUG: Raw metadata content: Object
 DEBUG: Properly validated quantities from metadata: []
 DEEP DEBUG - Raw transaction items before processing: [{"amount":4500,"taxRate":1.8,"taxType":"percentage","discount":1.1,"quantity":3,"productId":10,"unitPrice":1500,"description":"Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.","discountType":"percentage","quantityReceived":0}]
 DEEP DEBUG - Full transaction object: {"id":21,"businessId":1,"accountId":1,"documentNumber":"BILL-20250524-7447","date":"2025-05-24T15:43:31.253Z","notes":"","description":"Bill #BILL-20250524-7447","status":"partial_paid","contactName":"alamgir alam","vendorId":null,"billNumber":"BILL-20250524-7447","billDate":"2025-05-24T15:43:31.253Z","dueDate":"2025-05-24T15:43:31.253Z","amount":4531,"paymentReceived":2397,"items":[{"amount":4500,"taxRate":1.8,"taxType":"percentage","discount":1.1,"quantity":3,"productId":10,"unitPrice":1500,"description":"Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.","discountType":"percentage","quantityReceived":0}],"totalDiscount":0,"totalDiscountType":"flat","createdAt":"2025-05-24T15:44:15.614Z","type":"expense","category":"Purchases","metadata":{"totalDiscount":0,"totalDiscountType":"flat","dueDate":"2025-05-24T15:43:31.253Z","itemQuantitiesReceived":[],"receivedQuantityMap":{},"isFrozen":true,"lastFreezeUpdate":"2025-05-26T10:30:04.590Z"}}
 DEEP DEBUG - Raw item data for product 10: {"amount":4500,"taxRate":1.8,"taxType":"percentage","discount":1.1,"quantity":3,"productId":10,"unitPrice":1500,"description":"Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.","discountType":"percentage","quantityReceived":0}
 DEEP DEBUG - Found direct quantityReceived=0 on item for product 10
 DEEP DEBUG - Item property [amount] = 4500
 DEEP DEBUG - Item property [taxRate] = 1.8
 DEEP DEBUG - Item property [taxType] = percentage
 DEEP DEBUG - Item property [discount] = 1.1
 DEEP DEBUG - Item property [quantity] = 3
 DEEP DEBUG - Item property [productId] = 10
 DEEP DEBUG - Item property [unitPrice] = 1500
 DEEP DEBUG - Item property [description] = Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.
 DEEP DEBUG - Item property [discountType] = percentage
 DEEP DEBUG - Item property [quantityReceived] = 0
 DEEP DEBUG - Final processing decision for Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible. (ID: 10) Object
 Found totalDiscount in metadata: 0
 Setting totalDiscount: 0 type: flat
 Checking for metadata in editingBill: Object
 Using totalDiscount from metadata: 0
 ‚ö†Ô∏è FIXED: Quantity for product 10 (Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.): Object
 üîç FINAL ITEMS FOR FORM: [
  {
    "productId": 10,
    "description": "Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.",
    "quantityReceived": 0
  }
]
 üîß EXPLICITLY set form item 0 (10) quantityReceived to: 0
 Final form reset - Product 10: Quantity 0
 REBUILD - Initializing form with complete bill data and quantities
 INIT ITEM 0: Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible. (ID: 10) Object
 INITIALIZATION: Starting extraction for product 10 (Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.)
 EXTRACT: Direct property found with value 0 for product 10
 EXTRACTION COMPLETE for product 10: Object
 REBUILD - Quantity confirmation complete
 ‚úÖ FREEZE STATUS UPDATE: Bill 21 freeze status successfully set to true
 üîí TOGGLE: Successfully updated freeze state to true
PurchaseBillSplitView.tsx:685 Checking for discount in bill view: Object
PurchaseBillSplitView.tsx:693 Bill metadata when checking discount: Object
PurchaseBillSplitView.tsx:730 Discount calculation with improved handling: Object
PurchaseBillSplitView.tsx:186 Original bill for editing: Object
PurchaseBillSplitView.tsx:220 Prepared metadata for edit: Object
PurchaseBillSplitView.tsx:246 üü¢ EDIT PREP: Found direct property value 0 for product 10
PurchaseBillSplitView.tsx:304 üìä EDIT PREP SUMMARY for product 10: Object
PurchaseBillSplitView.tsx:312 VIEW FINAL: Product 10 received qty = 0 (direct-property)
PurchaseBillSplitView.tsx:339 Determined contact ID: null
PurchaseBillSplitView.tsx:342 Processed items: Array(1)
PurchaseBillSplitView.tsx:384 Bill object prepared for editing: Object
 INIT - Initializing bill items from editing bill: Object
 INIT - Items data to initialize from: [
  {
    "amount": 4500,
    "taxRate": 1.8,
    "taxType": "percentage",
    "discount": 1.1,
    "quantity": 3,
    "productId": 10,
    "unitPrice": 1500,
    "description": "Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.",
    "discountType": "percentage",
    "quantityReceived": 0
  }
]
 ‚úÖ INIT - Bill has metadata property
 ‚úÖ INIT - Successfully parsed metadata string: {
  "totalDiscount": 0,
  "totalDiscountType": "flat",
  "dueDate": "2025-05-24T15:43:31.253Z",
  "itemQuantitiesReceived": [],
  "receivedQuantityMap": {}
}
 ‚úÖ INIT - Found receivedQuantityMap in metadata: Object
 ‚úÖ INIT - Found itemQuantitiesReceived array in metadata: []
 ‚ö†Ô∏è INIT - No received quantities found in metadata
 INIT - Found direct quantities in items: Array(1)
 INIT - Adding direct quantity for product 10: 0
 INIT - Final quantityReceivedMap: Object
 INIT - FINAL quantityReceived for product 10 (Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.): 0
 INITIALIZATION: Starting extraction for product 10 (Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.)
 EXTRACT: Direct property found with value 0 for product 10
 EXTRACTION COMPLETE for product 10: Object
 Parsed metadata: Object
 üîí FREEZE SYSTEM: Initializing freeze state detection...
 üîí FREEZE SYSTEM: Checking bill metadata for freeze status Object
 üîí FREEZE SYSTEM: Successfully extracted freeze status Object
 üîí FREEZE SYSTEM: Setting freeze state to false for bill 21
 üîí FREEZE SYSTEM: Bill is unfrozen - form is editable
 üîí FREEZE STATE CHANGED: isFrozen is now false for bill 21
 BILL EDIT DEBUG - Full bill being edited: {
  "id": 21,
  "businessId": 1,
  "accountId": 1,
  "documentNumber": "BILL-20250524-7447",
  "date": "2025-05-24T15:43:31.253Z",
  "notes": "",
  "description": "Bill #BILL-20250524-7447",
  "status": "partial_paid",
  "contactName": "alamgir alam",
  "vendorId": null,
  "billNumber": "BILL-20250524-7447",
  "billDate": "2025-05-24T15:43:31.253Z",
  "dueDate": "2025-05-24T15:43:31.253Z",
  "amount": 4531,
  "paymentReceived": 2397,
  "items": [
    {
      "amount": 4500,
      "taxRate": 1.8,
      "taxType": "percentage",
      "discount": 1.1,
      "quantity": 3,
      "productId": 10,
      "unitPrice": 1500,
      "description": "Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.",
      "discountType": "percentage",
      "quantityReceived": 0
    }
  ],
  "totalDiscount": 0,
  "totalDiscountType": "flat",
  "createdAt": "2025-05-24T15:44:15.614Z",
  "type": "expense",
  "category": "Purchases",
  "metadata": "{\"totalDiscount\":0,\"totalDiscountType\":\"flat\",\"dueDate\":\"2025-05-24T15:43:31.253Z\",\"itemQuantitiesReceived\":[],\"receivedQuantityMap\":{}}"
}
 DEBUG: Successfully parsed metadata from string
 DEBUG: Raw metadata content: Object
 DEBUG: Properly validated quantities from metadata: []
 DEEP DEBUG - Raw transaction items before processing: [{"amount":4500,"taxRate":1.8,"taxType":"percentage","discount":1.1,"quantity":3,"productId":10,"unitPrice":1500,"description":"Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.","discountType":"percentage","quantityReceived":0}]
 DEEP DEBUG - Full transaction object: {"id":21,"businessId":1,"accountId":1,"documentNumber":"BILL-20250524-7447","date":"2025-05-24T15:43:31.253Z","notes":"","description":"Bill #BILL-20250524-7447","status":"partial_paid","contactName":"alamgir alam","vendorId":null,"billNumber":"BILL-20250524-7447","billDate":"2025-05-24T15:43:31.253Z","dueDate":"2025-05-24T15:43:31.253Z","amount":4531,"paymentReceived":2397,"items":[{"amount":4500,"taxRate":1.8,"taxType":"percentage","discount":1.1,"quantity":3,"productId":10,"unitPrice":1500,"description":"Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.","discountType":"percentage","quantityReceived":0}],"totalDiscount":0,"totalDiscountType":"flat","createdAt":"2025-05-24T15:44:15.614Z","type":"expense","category":"Purchases","metadata":"{\"totalDiscount\":0,\"totalDiscountType\":\"flat\",\"dueDate\":\"2025-05-24T15:43:31.253Z\",\"itemQuantitiesReceived\":[],\"receivedQuantityMap\":{}}"}
 DEEP DEBUG - Raw item data for product 10: {"amount":4500,"taxRate":1.8,"taxType":"percentage","discount":1.1,"quantity":3,"productId":10,"unitPrice":1500,"description":"Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.","discountType":"percentage","quantityReceived":0}
 DEEP DEBUG - Found direct quantityReceived=0 on item for product 10
 DEEP DEBUG - Item property [amount] = 4500
 DEEP DEBUG - Item property [taxRate] = 1.8
 DEEP DEBUG - Item property [taxType] = percentage
 DEEP DEBUG - Item property [discount] = 1.1
 DEEP DEBUG - Item property [quantity] = 3
 DEEP DEBUG - Item property [productId] = 10
 DEEP DEBUG - Item property [unitPrice] = 1500
 DEEP DEBUG - Item property [description] = Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.
 DEEP DEBUG - Item property [discountType] = percentage
 DEEP DEBUG - Item property [quantityReceived] = 0
 DEEP DEBUG - Final processing decision for Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible. (ID: 10) Object
 Found totalDiscount in direct property: 0
 Setting totalDiscount: 0 type: flat
 Checking for metadata in editingBill: Object
 Using totalDiscount from direct property: 0
 ‚ö†Ô∏è FIXED: Quantity for product 10 (Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.): Object
 üîç FINAL ITEMS FOR FORM: [
  {
    "productId": 10,
    "description": "Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.",
    "quantityReceived": 0
  }
]
 üîß EXPLICITLY set form item 0 (10) quantityReceived to: 0
 Final form reset - Product 10: Quantity 0
 REBUILD - Initializing form with complete bill data and quantities
 INIT ITEM 0: Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible. (ID: 10) Object
 INITIALIZATION: Starting extraction for product 10 (Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.)
 EXTRACT: Direct property found with value 0 for product 10
 EXTRACTION COMPLETE for product 10: Object
 Parsed metadata: Object
 INITIALIZATION: Starting extraction for product 10 (Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.)
 EXTRACT: Direct property found with value 0 for product 10
 EXTRACTION COMPLETE for product 10: Object
 Parsed metadata: Object
 REBUILD - Quantity confirmation complete
 INITIALIZATION: Starting extraction for product 10 (Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.)
 EXTRACT: Direct property found with value 0 for product 10
 EXTRACTION COMPLETE for product 10: Object
 Parsed metadata: Object
 üîí TOGGLE: Switching from false to true for bill 21
 üîÑ UPDATE FREEZE STATUS: Setting bill 21 freeze to true
 üîÑ UPDATE FREEZE STATUS: Current metadata: {"totalDiscount":0,"totalDiscountType":"flat","dueDate":"2025-05-24T15:43:31.253Z","itemQuantitiesReceived":[],"receivedQuantityMap":{}}
 üîÑ UPDATE FREEZE STATUS: Sending metadata: Object
 ‚úÖ FREEZE STATUS UPDATE: Bill 21 freeze status successfully set to true
 üîí TOGGLE: Successfully updated freeze state to true
 INITIALIZATION: Starting extraction for product 10 (Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.)
 EXTRACT: Direct property found with value 0 for product 10
 EXTRACTION COMPLETE for product 10: Object
 üîí FREEZE SYSTEM: Initializing freeze state detection...
 üîí FREEZE SYSTEM: Checking bill metadata for freeze status Object
 üîí FREEZE SYSTEM: Successfully extracted freeze status Object
 üîí FREEZE SYSTEM: Setting freeze state to true for bill 21
 üîí FREEZE SYSTEM: Bill is frozen - applying form restrictions
 üîí FREEZE STATE CHANGED: isFrozen is now true for bill 21
 BILL EDIT DEBUG - Full bill being edited: {
  "id": 21,
  "businessId": 1,
  "accountId": 1,
  "documentNumber": "BILL-20250524-7447",
  "date": "2025-05-24T15:43:31.253Z",
  "notes": "",
  "description": "Bill #BILL-20250524-7447",
  "status": "partial_paid",
  "contactName": "alamgir alam",
  "vendorId": null,
  "billNumber": "BILL-20250524-7447",
  "billDate": "2025-05-24T15:43:31.253Z",
  "dueDate": "2025-05-24T15:43:31.253Z",
  "amount": 4531,
  "paymentReceived": 2397,
  "items": [
    {
      "amount": 4500,
      "taxRate": 1.8,
      "taxType": "percentage",
      "discount": 1.1,
      "quantity": 3,
      "productId": 10,
      "unitPrice": 1500,
      "description": "Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.",
      "discountType": "percentage",
      "quantityReceived": 0
    }
  ],
  "totalDiscount": 0,
  "totalDiscountType": "flat",
  "createdAt": "2025-05-24T15:44:15.614Z",
  "type": "expense",
  "category": "Purchases",
  "metadata": {
    "totalDiscount": 0,
    "totalDiscountType": "flat",
    "dueDate": "2025-05-24T15:43:31.253Z",
    "itemQuantitiesReceived": [],
    "receivedQuantityMap": {},
    "isFrozen": true,
    "lastFreezeUpdate": "2025-05-26T10:40:13.622Z"
  }
}
 DEBUG: Metadata was already an object
 DEBUG: Raw metadata content: Object
 DEBUG: Properly validated quantities from metadata: []
 DEEP DEBUG - Raw transaction items before processing: [{"amount":4500,"taxRate":1.8,"taxType":"percentage","discount":1.1,"quantity":3,"productId":10,"unitPrice":1500,"description":"Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.","discountType":"percentage","quantityReceived":0}]
 DEEP DEBUG - Full transaction object: {"id":21,"businessId":1,"accountId":1,"documentNumber":"BILL-20250524-7447","date":"2025-05-24T15:43:31.253Z","notes":"","description":"Bill #BILL-20250524-7447","status":"partial_paid","contactName":"alamgir alam","vendorId":null,"billNumber":"BILL-20250524-7447","billDate":"2025-05-24T15:43:31.253Z","dueDate":"2025-05-24T15:43:31.253Z","amount":4531,"paymentReceived":2397,"items":[{"amount":4500,"taxRate":1.8,"taxType":"percentage","discount":1.1,"quantity":3,"productId":10,"unitPrice":1500,"description":"Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.","discountType":"percentage","quantityReceived":0}],"totalDiscount":0,"totalDiscountType":"flat","createdAt":"2025-05-24T15:44:15.614Z","type":"expense","category":"Purchases","metadata":{"totalDiscount":0,"totalDiscountType":"flat","dueDate":"2025-05-24T15:43:31.253Z","itemQuantitiesReceived":[],"receivedQuantityMap":{},"isFrozen":true,"lastFreezeUpdate":"2025-05-26T10:40:13.622Z"}}
 DEEP DEBUG - Raw item data for product 10: {"amount":4500,"taxRate":1.8,"taxType":"percentage","discount":1.1,"quantity":3,"productId":10,"unitPrice":1500,"description":"Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.","discountType":"percentage","quantityReceived":0}
 DEEP DEBUG - Found direct quantityReceived=0 on item for product 10
 DEEP DEBUG - Item property [amount] = 4500
 DEEP DEBUG - Item property [taxRate] = 1.8
 DEEP DEBUG - Item property [taxType] = percentage
 DEEP DEBUG - Item property [discount] = 1.1
 DEEP DEBUG - Item property [quantity] = 3
 DEEP DEBUG - Item property [productId] = 10
 DEEP DEBUG - Item property [unitPrice] = 1500
 DEEP DEBUG - Item property [description] = Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.
 DEEP DEBUG - Item property [discountType] = percentage
 DEEP DEBUG - Item property [quantityReceived] = 0
 DEEP DEBUG - Final processing decision for Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible. (ID: 10) Object
 Found totalDiscount in metadata: 0
 Setting totalDiscount: 0 type: flat
 Checking for metadata in editingBill: Object
 Using totalDiscount from metadata: 0
 ‚ö†Ô∏è FIXED: Quantity for product 10 (Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.): Object
 üîç FINAL ITEMS FOR FORM: [
  {
    "productId": 10,
    "description": "Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.",
    "quantityReceived": 0
  }
]
 üîß EXPLICITLY set form item 0 (10) quantityReceived to: 0
 Final form reset - Product 10: Quantity 0
 REBUILD - Initializing form with complete bill data and quantities
 INIT ITEM 0: Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible. (ID: 10) Object
 INITIALIZATION: Starting extraction for product 10 (Transparent, shock-absorbent phone case with precise cutouts for ports and buttons. Wireless charging compatible.)
 EXTRACT: Direct property found with value 0 for product 10
 EXTRACTION COMPLETE for product 10: Object
 REBUILD - Quantity confirmation complete
PurchaseBillSplitView.tsx:685 Checking for discount in bill view: Object
PurchaseBillSplitView.tsx:693 Bill metadata when checking discount: Object
PurchaseBillSplitView.tsx:730 Discount calculation with improved handling: Object
PurchaseBillSplitView.tsx:685 Checking for discount in bill view: Object
PurchaseBillSplitView.tsx:693 Bill metadata when checking discount: Object
PurchaseBillSplitView.tsx:730 Discount calculation with improved handling: Object
PurchaseBillSplitView.tsx:685 Checking for discount in bill view: Object
PurchaseBillSplitView.tsx:693 Bill metadata when checking discount: Object
PurchaseBillSplitView.tsx:730 Discount calculation with improved handling: Object
PurchaseBillSplitView.tsx:685 Checking for discount in bill view: Object
PurchaseBillSplitView.tsx:693 Bill metadata when checking discount: Object
PurchaseBillSplitView.tsx:730 Discount calculation with improved handling: Object
PurchaseBillSplitView.tsx:186 Original bill for editing: Object
PurchaseBillSplitView.tsx:220 Prepared metadata for edit: Object
PurchaseBillSplitView.tsx:246 üü¢ EDIT PREP: Found direct property value 2 for product 5
PurchaseBillSplitView.tsx:304 üìä EDIT PREP SUMMARY for product 5: Object
PurchaseBillSplitView.tsx:312 VIEW FINAL: Product 5 received qty = 2 (direct-property)
PurchaseBillSplitView.tsx:339 Determined contact ID: null
PurchaseBillSplitView.tsx:342 Processed items: Array(1)
PurchaseBillSplitView.tsx:384 Bill object prepared for editing: Object
 INIT - Initializing bill items from editing bill: Object
 INIT - Items data to initialize from: [
  {
    "amount": 24000,
    "taxRate": 0,
    "taxType": "percentage",
    "discount": 0,
    "quantity": 3,
    "productId": 5,
    "unitPrice": 8000,
    "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
    "discountType": "percentage",
    "quantityReceived": 2
  }
]
 ‚úÖ INIT - Bill has metadata property
 ‚úÖ INIT - Successfully parsed metadata string: {
  "totalDiscount": 0,
  "totalDiscountType": "flat",
  "dueDate": "2025-05-26T00:10:20.533Z",
  "itemQuantitiesReceived": [],
  "receivedQuantityMap": {}
}
 ‚úÖ INIT - Found receivedQuantityMap in metadata: Object
 ‚úÖ INIT - Found itemQuantitiesReceived array in metadata: []
 ‚ö†Ô∏è INIT - No received quantities found in metadata
 INIT - Found direct quantities in items: Array(1)
 INIT - Adding direct quantity for product 5: 2
 INIT - Final quantityReceivedMap: Object
 INIT - FINAL quantityReceived for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.): 2
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 Parsed metadata: Object
 üîí FREEZE SYSTEM: Initializing freeze state detection...
 üîí FREEZE SYSTEM: Checking bill metadata for freeze status Object
 üîí FREEZE SYSTEM: Successfully extracted freeze status Object
 üîí FREEZE SYSTEM: Setting freeze state to false for bill 22
 üîí FREEZE SYSTEM: Bill is unfrozen - form is editable
 üîí FREEZE STATE CHANGED: isFrozen is now false for bill 22
 BILL EDIT DEBUG - Full bill being edited: {
  "id": 22,
  "businessId": 1,
  "accountId": 1,
  "documentNumber": "BILL-20250526-8376",
  "date": "2025-05-26T00:10:20.533Z",
  "notes": "",
  "description": "Bill #BILL-20250526-8376",
  "status": "partial_received",
  "contactName": "Shayaduzzaman Khan",
  "vendorId": null,
  "billNumber": "BILL-20250526-8376",
  "billDate": "2025-05-26T00:10:20.533Z",
  "dueDate": "2025-05-26T00:10:20.533Z",
  "amount": 24000,
  "paymentReceived": 0,
  "items": [
    {
      "amount": 24000,
      "taxRate": 0,
      "taxType": "percentage",
      "discount": 0,
      "quantity": 3,
      "productId": 5,
      "unitPrice": 8000,
      "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
      "discountType": "percentage",
      "quantityReceived": 2
    }
  ],
  "totalDiscount": 0,
  "totalDiscountType": "flat",
  "createdAt": "2025-05-26T00:10:47.189Z",
  "type": "expense",
  "category": "Purchases",
  "metadata": "{\"totalDiscount\":0,\"totalDiscountType\":\"flat\",\"dueDate\":\"2025-05-26T00:10:20.533Z\",\"itemQuantitiesReceived\":[],\"receivedQuantityMap\":{}}"
}
 DEBUG: Successfully parsed metadata from string
 DEBUG: Raw metadata content: Object
 DEBUG: Properly validated quantities from metadata: []
 DEBUG: Found direct quantities in items: Array(1)
 DEBUG: Added direct quantity for product 5: 2
 DEEP DEBUG - Raw transaction items before processing: [{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}]
 DEEP DEBUG - Full transaction object: {"id":22,"businessId":1,"accountId":1,"documentNumber":"BILL-20250526-8376","date":"2025-05-26T00:10:20.533Z","notes":"","description":"Bill #BILL-20250526-8376","status":"partial_received","contactName":"Shayaduzzaman Khan","vendorId":null,"billNumber":"BILL-20250526-8376","billDate":"2025-05-26T00:10:20.533Z","dueDate":"2025-05-26T00:10:20.533Z","amount":24000,"paymentReceived":0,"items":[{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}],"totalDiscount":0,"totalDiscountType":"flat","createdAt":"2025-05-26T00:10:47.189Z","type":"expense","category":"Purchases","metadata":"{\"totalDiscount\":0,\"totalDiscountType\":\"flat\",\"dueDate\":\"2025-05-26T00:10:20.533Z\",\"itemQuantitiesReceived\":[],\"receivedQuantityMap\":{}}"}
 DEEP DEBUG - Raw item data for product 5: {"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}
 DEEP DEBUG - Found direct quantityReceived=2 on item for product 5
 DEEP DEBUG - Item property [amount] = 24000
 DEEP DEBUG - Item property [taxRate] = 0
 DEEP DEBUG - Item property [taxType] = percentage
 DEEP DEBUG - Item property [discount] = 0
 DEEP DEBUG - Item property [quantity] = 3
 DEEP DEBUG - Item property [productId] = 5
 DEEP DEBUG - Item property [unitPrice] = 8000
 DEEP DEBUG - Item property [description] = Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.
 DEEP DEBUG - Item property [discountType] = percentage
 DEEP DEBUG - Item property [quantityReceived] = 2
 DEEP DEBUG - Final processing decision for Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 Found totalDiscount in direct property: 0
 Setting totalDiscount: 0 type: flat
 Checking for metadata in editingBill: Object
 Using totalDiscount from direct property: 0
 ‚ö†Ô∏è FIXED: Quantity for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.): Object
 üîç FINAL ITEMS FOR FORM: [
  {
    "productId": 5,
    "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
    "quantityReceived": 2
  }
]
 üîß EXPLICITLY set form item 0 (5) quantityReceived to: 2
 Final form reset - Product 5: Quantity 2
 REBUILD - Initializing form with complete bill data and quantities
 INIT ITEM 0: Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 Parsed metadata: Object
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 Parsed metadata: Object
 REBUILD - Quantity confirmation complete
 üîí TOGGLE: Switching from false to true for bill 22
 üîÑ UPDATE FREEZE STATUS: Setting bill 22 freeze to true
 üîÑ UPDATE FREEZE STATUS: Current metadata: {"totalDiscount":0,"totalDiscountType":"flat","dueDate":"2025-05-26T00:10:20.533Z","itemQuantitiesReceived":[],"receivedQuantityMap":{}}
 üîÑ UPDATE FREEZE STATUS: Sending metadata: Object
 üîí TOGGLE: Switching from false to true for bill 22
 üîÑ UPDATE FREEZE STATUS: Setting bill 22 freeze to true
 üîÑ UPDATE FREEZE STATUS: Current metadata: {"totalDiscount":0,"totalDiscountType":"flat","dueDate":"2025-05-26T00:10:20.533Z","itemQuantitiesReceived":[],"receivedQuantityMap":{}}
 üîÑ UPDATE FREEZE STATUS: Sending metadata: Object
 ‚úÖ FREEZE STATUS UPDATE: Bill 22 freeze status successfully set to true
 üîí TOGGLE: Successfully updated freeze state to true
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 üîí FREEZE SYSTEM: Initializing freeze state detection...
 üîí FREEZE SYSTEM: Checking bill metadata for freeze status Object
 üîí FREEZE SYSTEM: Successfully extracted freeze status Object
 üîí FREEZE SYSTEM: Setting freeze state to true for bill 22
 üîí FREEZE SYSTEM: Bill is frozen - applying form restrictions
 üîí FREEZE STATE CHANGED: isFrozen is now true for bill 22
 BILL EDIT DEBUG - Full bill being edited: {
  "id": 22,
  "businessId": 1,
  "accountId": 1,
  "documentNumber": "BILL-20250526-8376",
  "date": "2025-05-26T00:10:20.533Z",
  "notes": "",
  "description": "Bill #BILL-20250526-8376",
  "status": "partial_received",
  "contactName": "Shayaduzzaman Khan",
  "vendorId": null,
  "billNumber": "BILL-20250526-8376",
  "billDate": "2025-05-26T00:10:20.533Z",
  "dueDate": "2025-05-26T00:10:20.533Z",
  "amount": 24000,
  "paymentReceived": 0,
  "items": [
    {
      "amount": 24000,
      "taxRate": 0,
      "taxType": "percentage",
      "discount": 0,
      "quantity": 3,
      "productId": 5,
      "unitPrice": 8000,
      "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
      "discountType": "percentage",
      "quantityReceived": 2
    }
  ],
  "totalDiscount": 0,
  "totalDiscountType": "flat",
  "createdAt": "2025-05-26T00:10:47.189Z",
  "type": "expense",
  "category": "Purchases",
  "metadata": {
    "totalDiscount": 0,
    "totalDiscountType": "flat",
    "dueDate": "2025-05-26T00:10:20.533Z",
    "itemQuantitiesReceived": [],
    "receivedQuantityMap": {},
    "isFrozen": true,
    "lastFreezeUpdate": "2025-05-26T10:41:27.767Z"
  }
}
 DEBUG: Metadata was already an object
 DEBUG: Raw metadata content: Object
 DEBUG: Properly validated quantities from metadata: []
 DEBUG: Found direct quantities in items: Array(1)
 DEBUG: Added direct quantity for product 5: 2
 DEEP DEBUG - Raw transaction items before processing: [{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}]
 DEEP DEBUG - Full transaction object: {"id":22,"businessId":1,"accountId":1,"documentNumber":"BILL-20250526-8376","date":"2025-05-26T00:10:20.533Z","notes":"","description":"Bill #BILL-20250526-8376","status":"partial_received","contactName":"Shayaduzzaman Khan","vendorId":null,"billNumber":"BILL-20250526-8376","billDate":"2025-05-26T00:10:20.533Z","dueDate":"2025-05-26T00:10:20.533Z","amount":24000,"paymentReceived":0,"items":[{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}],"totalDiscount":0,"totalDiscountType":"flat","createdAt":"2025-05-26T00:10:47.189Z","type":"expense","category":"Purchases","metadata":{"totalDiscount":0,"totalDiscountType":"flat","dueDate":"2025-05-26T00:10:20.533Z","itemQuantitiesReceived":[],"receivedQuantityMap":{},"isFrozen":true,"lastFreezeUpdate":"2025-05-26T10:41:27.767Z"}}
 DEEP DEBUG - Raw item data for product 5: {"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}
 DEEP DEBUG - Found direct quantityReceived=2 on item for product 5
 DEEP DEBUG - Item property [amount] = 24000
 DEEP DEBUG - Item property [taxRate] = 0
 DEEP DEBUG - Item property [taxType] = percentage
 DEEP DEBUG - Item property [discount] = 0
 DEEP DEBUG - Item property [quantity] = 3
 DEEP DEBUG - Item property [productId] = 5
 DEEP DEBUG - Item property [unitPrice] = 8000
 DEEP DEBUG - Item property [description] = Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.
 DEEP DEBUG - Item property [discountType] = percentage
 DEEP DEBUG - Item property [quantityReceived] = 2
 DEEP DEBUG - Final processing decision for Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 Found totalDiscount in metadata: 0
 Setting totalDiscount: 0 type: flat
 Checking for metadata in editingBill: Object
 Using totalDiscount from metadata: 0
 ‚ö†Ô∏è FIXED: Quantity for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.): Object
 üîç FINAL ITEMS FOR FORM: [
  {
    "productId": 5,
    "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
    "quantityReceived": 2
  }
]
 üîß EXPLICITLY set form item 0 (5) quantityReceived to: 2
 Final form reset - Product 5: Quantity 2
 REBUILD - Initializing form with complete bill data and quantities
 INIT ITEM 0: Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 REBUILD - Quantity confirmation complete
 üîí TOGGLE: Switching from true to false for bill 22
 üîÑ UPDATE FREEZE STATUS: Setting bill 22 freeze to false
 üîÑ UPDATE FREEZE STATUS: Current metadata: Object
 üîÑ UPDATE FREEZE STATUS: Sending metadata: Object
 ‚úÖ FREEZE STATUS UPDATE: Bill 22 freeze status successfully set to true
 üîí TOGGLE: Successfully updated freeze state to true
 ‚úÖ FREEZE STATUS UPDATE: Bill 22 freeze status successfully set to false
 üîí TOGGLE: Successfully updated freeze state to false
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 üîí FREEZE SYSTEM: Initializing freeze state detection...
 üîí FREEZE SYSTEM: Checking bill metadata for freeze status Object
 üîí FREEZE SYSTEM: Successfully extracted freeze status Object
 üîí FREEZE SYSTEM: Setting freeze state to false for bill 22
 üîí FREEZE SYSTEM: Bill is unfrozen - form is editable
 üîí FREEZE STATE CHANGED: isFrozen is now false for bill 22
 BILL EDIT DEBUG - Full bill being edited: {
  "id": 22,
  "businessId": 1,
  "accountId": 1,
  "documentNumber": "BILL-20250526-8376",
  "date": "2025-05-26T00:10:20.533Z",
  "notes": "",
  "description": "Bill #BILL-20250526-8376",
  "status": "partial_received",
  "contactName": "Shayaduzzaman Khan",
  "vendorId": null,
  "billNumber": "BILL-20250526-8376",
  "billDate": "2025-05-26T00:10:20.533Z",
  "dueDate": "2025-05-26T00:10:20.533Z",
  "amount": 24000,
  "paymentReceived": 0,
  "items": [
    {
      "amount": 24000,
      "taxRate": 0,
      "taxType": "percentage",
      "discount": 0,
      "quantity": 3,
      "productId": 5,
      "unitPrice": 8000,
      "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
      "discountType": "percentage",
      "quantityReceived": 2
    }
  ],
  "totalDiscount": 0,
  "totalDiscountType": "flat",
  "createdAt": "2025-05-26T00:10:47.189Z",
  "type": "expense",
  "category": "Purchases",
  "metadata": {
    "totalDiscount": 0,
    "totalDiscountType": "flat",
    "dueDate": "2025-05-26T00:10:20.533Z",
    "itemQuantitiesReceived": [],
    "receivedQuantityMap": {},
    "isFrozen": false,
    "lastFreezeUpdate": "2025-05-26T10:41:31.324Z"
  }
}
 DEBUG: Metadata was already an object
 DEBUG: Raw metadata content: Object
 DEBUG: Properly validated quantities from metadata: []
 DEBUG: Found direct quantities in items: Array(1)
 DEBUG: Added direct quantity for product 5: 2
 DEEP DEBUG - Raw transaction items before processing: [{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}]
 DEEP DEBUG - Full transaction object: {"id":22,"businessId":1,"accountId":1,"documentNumber":"BILL-20250526-8376","date":"2025-05-26T00:10:20.533Z","notes":"","description":"Bill #BILL-20250526-8376","status":"partial_received","contactName":"Shayaduzzaman Khan","vendorId":null,"billNumber":"BILL-20250526-8376","billDate":"2025-05-26T00:10:20.533Z","dueDate":"2025-05-26T00:10:20.533Z","amount":24000,"paymentReceived":0,"items":[{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}],"totalDiscount":0,"totalDiscountType":"flat","createdAt":"2025-05-26T00:10:47.189Z","type":"expense","category":"Purchases","metadata":{"totalDiscount":0,"totalDiscountType":"flat","dueDate":"2025-05-26T00:10:20.533Z","itemQuantitiesReceived":[],"receivedQuantityMap":{},"isFrozen":false,"lastFreezeUpdate":"2025-05-26T10:41:31.324Z"}}
 DEEP DEBUG - Raw item data for product 5: {"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}
 DEEP DEBUG - Found direct quantityReceived=2 on item for product 5
 DEEP DEBUG - Item property [amount] = 24000
 DEEP DEBUG - Item property [taxRate] = 0
 DEEP DEBUG - Item property [taxType] = percentage
 DEEP DEBUG - Item property [discount] = 0
 DEEP DEBUG - Item property [quantity] = 3
 DEEP DEBUG - Item property [productId] = 5
 DEEP DEBUG - Item property [unitPrice] = 8000
 DEEP DEBUG - Item property [description] = Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.
 DEEP DEBUG - Item property [discountType] = percentage
 DEEP DEBUG - Item property [quantityReceived] = 2
 DEEP DEBUG - Final processing decision for Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 Found totalDiscount in metadata: 0
 Setting totalDiscount: 0 type: flat
 Checking for metadata in editingBill: Object
 Using totalDiscount from metadata: 0
 ‚ö†Ô∏è FIXED: Quantity for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.): Object
 üîç FINAL ITEMS FOR FORM: [
  {
    "productId": 5,
    "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
    "quantityReceived": 2
  }
]
 üîß EXPLICITLY set form item 0 (5) quantityReceived to: 2
 Final form reset - Product 5: Quantity 2
 REBUILD - Initializing form with complete bill data and quantities
 INIT ITEM 0: Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 REBUILD - Quantity confirmation complete
 üîí TOGGLE: Switching from false to true for bill 22
 üîÑ UPDATE FREEZE STATUS: Setting bill 22 freeze to true
 üîÑ UPDATE FREEZE STATUS: Current metadata: Object
 üîÑ UPDATE FREEZE STATUS: Sending metadata: Object
 ‚úÖ FREEZE STATUS UPDATE: Bill 22 freeze status successfully set to true
 üîí TOGGLE: Successfully updated freeze state to true
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 üîí FREEZE SYSTEM: Initializing freeze state detection...
 üîí FREEZE SYSTEM: Checking bill metadata for freeze status Object
 üîí FREEZE SYSTEM: Successfully extracted freeze status Object
 üîí FREEZE SYSTEM: Setting freeze state to true for bill 22
 üîí FREEZE SYSTEM: Bill is frozen - applying form restrictions
 üîí FREEZE STATE CHANGED: isFrozen is now true for bill 22
 BILL EDIT DEBUG - Full bill being edited: {
  "id": 22,
  "businessId": 1,
  "accountId": 1,
  "documentNumber": "BILL-20250526-8376",
  "date": "2025-05-26T00:10:20.533Z",
  "notes": "",
  "description": "Bill #BILL-20250526-8376",
  "status": "partial_received",
  "contactName": "Shayaduzzaman Khan",
  "vendorId": null,
  "billNumber": "BILL-20250526-8376",
  "billDate": "2025-05-26T00:10:20.533Z",
  "dueDate": "2025-05-26T00:10:20.533Z",
  "amount": 24000,
  "paymentReceived": 0,
  "items": [
    {
      "amount": 24000,
      "taxRate": 0,
      "taxType": "percentage",
      "discount": 0,
      "quantity": 3,
      "productId": 5,
      "unitPrice": 8000,
      "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
      "discountType": "percentage",
      "quantityReceived": 2
    }
  ],
  "totalDiscount": 0,
  "totalDiscountType": "flat",
  "createdAt": "2025-05-26T00:10:47.189Z",
  "type": "expense",
  "category": "Purchases",
  "metadata": {
    "totalDiscount": 0,
    "totalDiscountType": "flat",
    "dueDate": "2025-05-26T00:10:20.533Z",
    "itemQuantitiesReceived": [],
    "receivedQuantityMap": {},
    "isFrozen": true,
    "lastFreezeUpdate": "2025-05-26T10:41:37.336Z"
  }
}
 DEBUG: Metadata was already an object
 DEBUG: Raw metadata content: Object
 DEBUG: Properly validated quantities from metadata: []
 DEBUG: Found direct quantities in items: Array(1)
 DEBUG: Added direct quantity for product 5: 2
 DEEP DEBUG - Raw transaction items before processing: [{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}]
 DEEP DEBUG - Full transaction object: {"id":22,"businessId":1,"accountId":1,"documentNumber":"BILL-20250526-8376","date":"2025-05-26T00:10:20.533Z","notes":"","description":"Bill #BILL-20250526-8376","status":"partial_received","contactName":"Shayaduzzaman Khan","vendorId":null,"billNumber":"BILL-20250526-8376","billDate":"2025-05-26T00:10:20.533Z","dueDate":"2025-05-26T00:10:20.533Z","amount":24000,"paymentReceived":0,"items":[{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}],"totalDiscount":0,"totalDiscountType":"flat","createdAt":"2025-05-26T00:10:47.189Z","type":"expense","category":"Purchases","metadata":{"totalDiscount":0,"totalDiscountType":"flat","dueDate":"2025-05-26T00:10:20.533Z","itemQuantitiesReceived":[],"receivedQuantityMap":{},"isFrozen":true,"lastFreezeUpdate":"2025-05-26T10:41:37.336Z"}}
 DEEP DEBUG - Raw item data for product 5: {"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}
 DEEP DEBUG - Found direct quantityReceived=2 on item for product 5
 DEEP DEBUG - Item property [amount] = 24000
 DEEP DEBUG - Item property [taxRate] = 0
 DEEP DEBUG - Item property [taxType] = percentage
 DEEP DEBUG - Item property [discount] = 0
 DEEP DEBUG - Item property [quantity] = 3
 DEEP DEBUG - Item property [productId] = 5
 DEEP DEBUG - Item property [unitPrice] = 8000
 DEEP DEBUG - Item property [description] = Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.
 DEEP DEBUG - Item property [discountType] = percentage
 DEEP DEBUG - Item property [quantityReceived] = 2
 DEEP DEBUG - Final processing decision for Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 Found totalDiscount in metadata: 0
 Setting totalDiscount: 0 type: flat
 Checking for metadata in editingBill: Object
 Using totalDiscount from metadata: 0
 ‚ö†Ô∏è FIXED: Quantity for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.): Object
 üîç FINAL ITEMS FOR FORM: [
  {
    "productId": 5,
    "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
    "quantityReceived": 2
  }
]
 üîß EXPLICITLY set form item 0 (5) quantityReceived to: 2
 Final form reset - Product 5: Quantity 2
 REBUILD - Initializing form with complete bill data and quantities
 INIT ITEM 0: Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 REBUILD - Quantity confirmation complete
PurchaseBillSplitView.tsx:685 Checking for discount in bill view: Object
PurchaseBillSplitView.tsx:693 Bill metadata when checking discount: Object
PurchaseBillSplitView.tsx:730 Discount calculation with improved handling: Object
PurchaseBillSplitView.tsx:685 Checking for discount in bill view: Object
PurchaseBillSplitView.tsx:693 Bill metadata when checking discount: Object
PurchaseBillSplitView.tsx:730 Discount calculation with improved handling: Object
PurchaseBillSplitView.tsx:685 Checking for discount in bill view: Object
PurchaseBillSplitView.tsx:693 Bill metadata when checking discount: Object
PurchaseBillSplitView.tsx:730 Discount calculation with improved handling: Object
PurchaseBillSplitView.tsx:685 Checking for discount in bill view: Object
PurchaseBillSplitView.tsx:693 Bill metadata when checking discount: Object
PurchaseBillSplitView.tsx:730 Discount calculation with improved handling: Object
PurchaseBillSplitView.tsx:186 Original bill for editing: Object
PurchaseBillSplitView.tsx:220 Prepared metadata for edit: Object
PurchaseBillSplitView.tsx:246 üü¢ EDIT PREP: Found direct property value 2 for product 5
PurchaseBillSplitView.tsx:304 üìä EDIT PREP SUMMARY for product 5: Object
PurchaseBillSplitView.tsx:312 VIEW FINAL: Product 5 received qty = 2 (direct-property)
PurchaseBillSplitView.tsx:339 Determined contact ID: null
PurchaseBillSplitView.tsx:342 Processed items: Array(1)
PurchaseBillSplitView.tsx:384 Bill object prepared for editing: Object
 INIT - Initializing bill items from editing bill: Object
 INIT - Items data to initialize from: [
  {
    "amount": 24000,
    "taxRate": 0,
    "taxType": "percentage",
    "discount": 0,
    "quantity": 3,
    "productId": 5,
    "unitPrice": 8000,
    "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
    "discountType": "percentage",
    "quantityReceived": 2
  }
]
 ‚úÖ INIT - Bill has metadata property
 ‚úÖ INIT - Successfully parsed metadata string: {
  "totalDiscount": 0,
  "totalDiscountType": "flat",
  "dueDate": "2025-05-26T00:10:20.533Z",
  "itemQuantitiesReceived": [],
  "receivedQuantityMap": {}
}
 ‚úÖ INIT - Found receivedQuantityMap in metadata: Object
 ‚úÖ INIT - Found itemQuantitiesReceived array in metadata: []
 ‚ö†Ô∏è INIT - No received quantities found in metadata
 INIT - Found direct quantities in items: Array(1)
 INIT - Adding direct quantity for product 5: 2
 INIT - Final quantityReceivedMap: Object
 INIT - FINAL quantityReceived for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.): 2
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 Parsed metadata: Object
 üîí FREEZE SYSTEM: Initializing freeze state detection...
 üîí FREEZE SYSTEM: Checking bill metadata for freeze status Object
 üîí FREEZE SYSTEM: Successfully extracted freeze status Object
 üîí FREEZE SYSTEM: Setting freeze state to false for bill 22
 üîí FREEZE SYSTEM: Bill is unfrozen - form is editable
 üîí FREEZE STATE CHANGED: isFrozen is now false for bill 22
 BILL EDIT DEBUG - Full bill being edited: {
  "id": 22,
  "businessId": 1,
  "accountId": 1,
  "documentNumber": "BILL-20250526-8376",
  "date": "2025-05-26T00:10:20.533Z",
  "notes": "",
  "description": "Bill #BILL-20250526-8376",
  "status": "partial_received",
  "contactName": "Shayaduzzaman Khan",
  "vendorId": null,
  "billNumber": "BILL-20250526-8376",
  "billDate": "2025-05-26T00:10:20.533Z",
  "dueDate": "2025-05-26T00:10:20.533Z",
  "amount": 24000,
  "paymentReceived": 0,
  "items": [
    {
      "amount": 24000,
      "taxRate": 0,
      "taxType": "percentage",
      "discount": 0,
      "quantity": 3,
      "productId": 5,
      "unitPrice": 8000,
      "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
      "discountType": "percentage",
      "quantityReceived": 2
    }
  ],
  "totalDiscount": 0,
  "totalDiscountType": "flat",
  "createdAt": "2025-05-26T00:10:47.189Z",
  "type": "expense",
  "category": "Purchases",
  "metadata": "{\"totalDiscount\":0,\"totalDiscountType\":\"flat\",\"dueDate\":\"2025-05-26T00:10:20.533Z\",\"itemQuantitiesReceived\":[],\"receivedQuantityMap\":{}}"
}
 DEBUG: Successfully parsed metadata from string
 DEBUG: Raw metadata content: Object
 DEBUG: Properly validated quantities from metadata: []
 DEBUG: Found direct quantities in items: Array(1)
 DEBUG: Added direct quantity for product 5: 2
 DEEP DEBUG - Raw transaction items before processing: [{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}]
 DEEP DEBUG - Full transaction object: {"id":22,"businessId":1,"accountId":1,"documentNumber":"BILL-20250526-8376","date":"2025-05-26T00:10:20.533Z","notes":"","description":"Bill #BILL-20250526-8376","status":"partial_received","contactName":"Shayaduzzaman Khan","vendorId":null,"billNumber":"BILL-20250526-8376","billDate":"2025-05-26T00:10:20.533Z","dueDate":"2025-05-26T00:10:20.533Z","amount":24000,"paymentReceived":0,"items":[{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}],"totalDiscount":0,"totalDiscountType":"flat","createdAt":"2025-05-26T00:10:47.189Z","type":"expense","category":"Purchases","metadata":"{\"totalDiscount\":0,\"totalDiscountType\":\"flat\",\"dueDate\":\"2025-05-26T00:10:20.533Z\",\"itemQuantitiesReceived\":[],\"receivedQuantityMap\":{}}"}
 DEEP DEBUG - Raw item data for product 5: {"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}
 DEEP DEBUG - Found direct quantityReceived=2 on item for product 5
 DEEP DEBUG - Item property [amount] = 24000
 DEEP DEBUG - Item property [taxRate] = 0
 DEEP DEBUG - Item property [taxType] = percentage
 DEEP DEBUG - Item property [discount] = 0
 DEEP DEBUG - Item property [quantity] = 3
 DEEP DEBUG - Item property [productId] = 5
 DEEP DEBUG - Item property [unitPrice] = 8000
 DEEP DEBUG - Item property [description] = Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.
 DEEP DEBUG - Item property [discountType] = percentage
 DEEP DEBUG - Item property [quantityReceived] = 2
 DEEP DEBUG - Final processing decision for Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 Found totalDiscount in direct property: 0
 Setting totalDiscount: 0 type: flat
 Checking for metadata in editingBill: Object
 Using totalDiscount from direct property: 0
 ‚ö†Ô∏è FIXED: Quantity for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.): Object
 üîç FINAL ITEMS FOR FORM: [
  {
    "productId": 5,
    "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
    "quantityReceived": 2
  }
]
 üîß EXPLICITLY set form item 0 (5) quantityReceived to: 2
 Final form reset - Product 5: Quantity 2
 REBUILD - Initializing form with complete bill data and quantities
 INIT ITEM 0: Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 Parsed metadata: Object
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 Parsed metadata: Object
 REBUILD - Quantity confirmation complete
 üîí TOGGLE: Switching from false to true for bill 22
 üîÑ UPDATE FREEZE STATUS: Setting bill 22 freeze to true
 üîÑ UPDATE FREEZE STATUS: Current metadata: {"totalDiscount":0,"totalDiscountType":"flat","dueDate":"2025-05-26T00:10:20.533Z","itemQuantitiesReceived":[],"receivedQuantityMap":{}}
 üîÑ UPDATE FREEZE STATUS: Sending metadata: Object
 üîí TOGGLE: Switching from false to true for bill 22
 üîÑ UPDATE FREEZE STATUS: Setting bill 22 freeze to true
 üîÑ UPDATE FREEZE STATUS: Current metadata: {"totalDiscount":0,"totalDiscountType":"flat","dueDate":"2025-05-26T00:10:20.533Z","itemQuantitiesReceived":[],"receivedQuantityMap":{}}
 üîÑ UPDATE FREEZE STATUS: Sending metadata: Object
 ‚úÖ FREEZE STATUS UPDATE: Bill 22 freeze status successfully set to true
 üîí TOGGLE: Successfully updated freeze state to true
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 üîí FREEZE SYSTEM: Initializing freeze state detection...
 üîí FREEZE SYSTEM: Checking bill metadata for freeze status Object
 üîí FREEZE SYSTEM: Successfully extracted freeze status Object
 üîí FREEZE SYSTEM: Setting freeze state to true for bill 22
 üîí FREEZE SYSTEM: Bill is frozen - applying form restrictions
 üîí FREEZE STATE CHANGED: isFrozen is now true for bill 22
 BILL EDIT DEBUG - Full bill being edited: {
  "id": 22,
  "businessId": 1,
  "accountId": 1,
  "documentNumber": "BILL-20250526-8376",
  "date": "2025-05-26T00:10:20.533Z",
  "notes": "",
  "description": "Bill #BILL-20250526-8376",
  "status": "partial_received",
  "contactName": "Shayaduzzaman Khan",
  "vendorId": null,
  "billNumber": "BILL-20250526-8376",
  "billDate": "2025-05-26T00:10:20.533Z",
  "dueDate": "2025-05-26T00:10:20.533Z",
  "amount": 24000,
  "paymentReceived": 0,
  "items": [
    {
      "amount": 24000,
      "taxRate": 0,
      "taxType": "percentage",
      "discount": 0,
      "quantity": 3,
      "productId": 5,
      "unitPrice": 8000,
      "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
      "discountType": "percentage",
      "quantityReceived": 2
    }
  ],
  "totalDiscount": 0,
  "totalDiscountType": "flat",
  "createdAt": "2025-05-26T00:10:47.189Z",
  "type": "expense",
  "category": "Purchases",
  "metadata": {
    "totalDiscount": 0,
    "totalDiscountType": "flat",
    "dueDate": "2025-05-26T00:10:20.533Z",
    "itemQuantitiesReceived": [],
    "receivedQuantityMap": {},
    "isFrozen": true,
    "lastFreezeUpdate": "2025-05-26T10:44:08.276Z"
  }
}
 DEBUG: Metadata was already an object
 DEBUG: Raw metadata content: Object
 DEBUG: Properly validated quantities from metadata: []
 DEBUG: Found direct quantities in items: Array(1)
 DEBUG: Added direct quantity for product 5: 2
 DEEP DEBUG - Raw transaction items before processing: [{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}]
 DEEP DEBUG - Full transaction object: {"id":22,"businessId":1,"accountId":1,"documentNumber":"BILL-20250526-8376","date":"2025-05-26T00:10:20.533Z","notes":"","description":"Bill #BILL-20250526-8376","status":"partial_received","contactName":"Shayaduzzaman Khan","vendorId":null,"billNumber":"BILL-20250526-8376","billDate":"2025-05-26T00:10:20.533Z","dueDate":"2025-05-26T00:10:20.533Z","amount":24000,"paymentReceived":0,"items":[{"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}],"totalDiscount":0,"totalDiscountType":"flat","createdAt":"2025-05-26T00:10:47.189Z","type":"expense","category":"Purchases","metadata":{"totalDiscount":0,"totalDiscountType":"flat","dueDate":"2025-05-26T00:10:20.533Z","itemQuantitiesReceived":[],"receivedQuantityMap":{},"isFrozen":true,"lastFreezeUpdate":"2025-05-26T10:44:08.276Z"}}
 DEEP DEBUG - Raw item data for product 5: {"amount":24000,"taxRate":0,"taxType":"percentage","discount":0,"quantity":3,"productId":5,"unitPrice":8000,"description":"Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.","discountType":"percentage","quantityReceived":2}
 DEEP DEBUG - Found direct quantityReceived=2 on item for product 5
 DEEP DEBUG - Item property [amount] = 24000
 DEEP DEBUG - Item property [taxRate] = 0
 DEEP DEBUG - Item property [taxType] = percentage
 DEEP DEBUG - Item property [discount] = 0
 DEEP DEBUG - Item property [quantity] = 3
 DEEP DEBUG - Item property [productId] = 5
 DEEP DEBUG - Item property [unitPrice] = 8000
 DEEP DEBUG - Item property [description] = Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.
 DEEP DEBUG - Item property [discountType] = percentage
 DEEP DEBUG - Item property [quantityReceived] = 2
 DEEP DEBUG - Final processing decision for Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 Found totalDiscount in metadata: 0
 Setting totalDiscount: 0 type: flat
 Checking for metadata in editingBill: Object
 Using totalDiscount from metadata: 0
 ‚ö†Ô∏è FIXED: Quantity for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.): Object
 üîç FINAL ITEMS FOR FORM: [
  {
    "productId": 5,
    "description": "Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.",
    "quantityReceived": 2
  }
]
 üîß EXPLICITLY set form item 0 (5) quantityReceived to: 2
 Final form reset - Product 5: Quantity 2
 REBUILD - Initializing form with complete bill data and quantities
 INIT ITEM 0: Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance. (ID: 5) Object
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 REBUILD - Quantity confirmation complete
 ‚úÖ FREEZE STATUS UPDATE: Bill 22 freeze status successfully set to true
 üîí TOGGLE: Successfully updated freeze state to true
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 üîí FREEZE SYSTEM: Initializing freeze state detection...
 üîí FREEZE SYSTEM: Checking bill metadata for freeze status Object
 üîí FREEZE SYSTEM: Successfully extracted freeze status Object
 üîí FREEZE SYSTEM: Setting freeze state to true for bill 22
 üîí FREEZE SYSTEM: Bill is frozen - applying form restrictions
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
 INITIALIZATION: Starting extraction for product 5 (Bluetooth 5.0 true wireless earbuds with touch controls, 30-hour battery life, and water resistance.)
 EXTRACT: Direct property found with value 2 for product 5
 EXTRACTION COMPLETE for product 5: Object
